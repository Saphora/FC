function CurrentURL(e,t){return function(t,n,r){n.attr("ng-href","/#/"+e.path())}}function desktopOnly(){return function(e,t,n){(parseInt(FCL.Client.ScreenWidth)<=1024||parseInt(FCL.Client.ViewportWidth)<=1024)&&$(t).hide()}}function backImg(){return function(e,t,n){var r="";e.$watch(n.watch,function(e){if(e){r=e;var a=FCL.BaseURL+"/"+n.backimg.replace("$0$",r);t.css({"background-image":"url("+a+")","background-size":"cover"})}})}}function color(e){return"#"+e}function theme(e,t,n){return Route=n,RouteParams=t,function(r,a,o){r.theme={},r.route=n,r.routeParams=t,r.genreId=t.genre;var i=e.path().split("/").length-1;if(i>=0?(r.genreId=e.path().split("/")[i],isNaN(parseInt(r.genreId))||(r.theme=ThemeData[r.genreId],theme=r.theme)):(r.theme=ThemeData[4492],theme=r.theme),null==theme||theme=={}||theme==[]||void 0==theme)throw new Error("Theme is undefined.");angular.module("FC").ActiveTheme=theme,ActiveTheme=theme,ActiveTheme&&$.each(o.theme.split(","),function(e,t){switch(t=t.replace(" ","").toLowerCase()){case"rating":a.css({border:"1px solid "+color(ActiveTheme.ThemeColor)});break;case"text-themecolor":a.css({color:color(ActiveTheme.ThemeColor)});break;case"text-default":a.css({color:color(ActiveTheme.DefaultTextColor)});break;case"theme-bg-color":a.css({"background-color":color(ActiveTheme.ThemeColor)});break;case"background":if(o["for"]){a=$(o["for"]);var n=FCL.BaseURL+"/",r=FCL.Client.ScreenWidth,i=FCL.Client.ScreenHeight;n+=theme.BackgroundImage+".img?",n+=i>r?"&height="+i:i==r?"&width="+r+"&height="+i:"&width="+r,a.css({"background-image":"url("+n+")","background-repeat":"no-repeat","background-color":color(theme.BackgroundColor)})}break;case"button":a.css({"background-color":color(ActiveTheme.ThemeColor),color:color(ActiveTheme.ButtonTextColor)});break;case"header":a.css({"background-color":color(ActiveTheme.ThemeColor),color:color(ActiveTheme.ButtonTextColor)});break;case"link":break;case"count":a.css({"background-color":color(ActiveTheme.ThemeColor),color:color(ActiveTheme.ButtonTextColor)});break;case"list-item":a.attr("class"),$(a.parent()[0]);a.css({"border-bottom":"2px solid "+color(ActiveTheme.ThemeColor)})}})}}function collapsible(){return function(e,t,n,r){var a;a=n.htmltext&&"true"==n.plaintext?!0:!1,e.$watch(n.collapsible,function(e,n){var r=e,o=t.next().find("div.btn")[0],i="";i=a?$(e).text():e,i=i.replace("<p>","").replace("</p>","");var l=$(o).attr("toggle-text");r=r.replace("<p>","").replace("</p>","");var c=$(o).text();r&&(r=r.replace("<p>","").replace("</p>",""),$(o).click(function(e){l=$(o).attr("toggle-text"),c=$(o).text(),"closed"==t.attr("toggle-state")?(t.css({height:"100%","max-height":"100%",overflow:"auto"}),t.find("p").html(r),$(this).text("show less"),t.attr("toggle-state","opened")):(t.css({"max-height":"auto",height:"auto"},n),i&&(t.find("p").html(i.substr(0,160)+"..."),$(this).text("show more"),$(this).attr("toggle-text",c)),t.attr("toggle-state","closed"))}),"closed"==t.attr("toggle-state")?(t.css({height:"auto","max-height":"auto"},n),i&&(t.find("p").html(i.substr(0,160)+"..."),$(this).text("show more"))):(t.css({height:"100%","max-height":"100%"}),t.find("p").html(r),$(this).text("show less"),t.attr("toggle-state","opened")))})}}function apiImg(){return console.log("INFO FROM DIRECTIVE"),function(e,t,n){console.info(arguments)}}function CalendarService(e,t){function n(t,n){function r(e){return e.data}function a(){console.error("Read error on promise CalendarService.GetActiveDateByWeekNum")}return n?e({url:u.BaseURL+"/Umbraco/API/Calendar/GetActiveDateByWeekNumAndYear?weekNum="+t+"&year="+n,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(r)["catch"](a):e({url:u.BaseURL+"/Umbraco/API/Calendar/GetActiveDateByWeekNum?weekNum="+t,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(r)["catch"](a)}function r(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.GetCurrentWeek")}var a=u.UserDateTime.getTime();return null!=t&&(a=t),e({url:u.BaseURL+"/Umbraco/API/Calendar/GetCurrentWeek?dateTime="+a,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function a(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.GetCurrentWeekNum")}var a=u.UserDateTime.getTime();return null!=t&&(a=t),e({url:u.BaseURL+"/Umbraco/API/Calendar/GetCurrentWeekNum?dateTime="+a,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function o(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.GetWeeks")}var a=u.UserDateTime.getTime();return null!=t&&(a=t),e({url:u.BaseURL+"/Umbraco/API/Calendar/GetWeeks?dateTime="+a,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function i(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.GetMonthsByCulture")}var a=u.UserCulture;return t&&(a=t),e({url:u.BaseURL+"/Umbraco/API/Calendar/GetMonths",method:"GET",headers:{Culture:a,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function l(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.GetFestivalYears")}return e({url:u.BaseURL+"/Umbraco/API/Festival/GetYears?&date="+t,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.toLocaleString(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function c(t,n,r){function a(e){return e.data}function o(){console.error("Read error on promise CalendarService.GetFestivalsByMonthAndYear")}return e({url:u.BaseURL+"/Umbraco/API/Festival/GetByMonth?&genre="+t+"&month="+n+"&year="+r,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(a)["catch"](o)}function s(t){function n(e){return e.data}function r(){console.error("Read error on promise CalendarService.SearchFestivals")}return null!=t&&""!=t?e({url:u.BaseURL+"/Umbraco/API/Festival/Search?&key="+t,method:"GET",headers:{Culture:u.UserCulture,UserDateTime:u.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r):void 0}vm=this;var u=FCClient.GetInstance();return{SearchFestivals:s,GetFestivalYears:l,GetMonthsByCulture:i,GetWeeks:o,GetCurrentWeek:r,GetCurrentWeekNum:a,GetActiveDateByWeekNum:n,GetFestivalsByMonthAndYear:c}}function FestivalService(e,t){function n(t){function n(e){return e.data}function r(){console.error("Read error on promise FestivalService.GetFestival")}return e({url:o.BaseURL+"/Umbraco/API/Festival/GetById?&id="+t,method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function r(t,n,r){function a(e){return e.data}function i(){console.error("Read error on promise FestivalService.GetFestivalsByWeek")}return e({url:o.BaseURL+"/Umbraco/API/Festival/GetByWeek?&week="+t+"&year="+n+"&genre="+r,method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"},data:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime()}}).then(a)["catch"](i)}function a(t,n,r){function a(e){return e.data}function i(){console.error("Read error on promise FestivalService.GetFestivalsByMonth")}return e({url:o.BaseURL+"/Umbraco/API/Festival/GetFestivalsByMonth?&month"+t+"&year="+n+"genre="+genreId,method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(a)["catch"](i)}vm=this;var o=FCClient.GetInstance();return{TilesResult:[],GetFestivalsByMonth:a,GetFestivalsByWeek:r,GetFestival:n}}function MainService(e,t){function n(t){function n(e){return e.data}function r(){console.error("Read error on promise MainService.GetGenre")}return e({url:o.BaseURL+"/Umbraco/API/Festival/GetGenre/"+t,method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function r(t){function n(e){return e.data}function r(){console.error("Read error on promise MainService.GetFlexSelectOptions")}return e({url:o.BaseURL+"/Umbraco/API/Themes/GetThemeByGenre"+t,method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function a(){function t(e){return e.data}function n(){console.error("Read error on promise MainService.GetTiles")}return e({url:o.BaseURL+"/Umbraco/API/Festival/GetTiles",method:"GET",headers:{Culture:o.UserCulture,UserDateTime:o.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(t)["catch"](n)}vm=this;var o=FCClient.GetInstance();return{TilesResult:[],GetTiles:a,GetFlexSelectOptions:r,GetGenre:n}}function NewsService(e,t,n){function r(t){function n(e){return e.data}function r(e){console.error("Read error on promise NewsService.GetNews(genreid)")}return e({url:a.BaseURL+"/Umbraco/API/News/GetNews/?&genreId="+t,method:"GET",headers:{Culture:a.UserCulture,UserDateTime:a.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}vm=this;var a=FCClient.GetInstance();return{GetNews:r}}function ReelService(e,t){vm=this;FCClient.GetInstance();return{}}function RatesService(e,t){function n(t,n){function r(e){e.data.rates.EUR=1,fx.rates=e.data.rates,accounting.settings={currency:{symbol:vm.Localization.CultureMoneySign,format:{pos:'<span class="money"><span class="format">%s</span><span class="money-value">%v</span></span>',neg:'<span class="money"><span class="format">%s</span><span class="money-value">(%v)</span></span>',zero:'<span class="money"><span class="format">%s</span><span class="money-value">--</span></span>'},decimal:vm.Localization.CultureCurrencySeparator,thousand:",",precision:vm.Localization.CurrencyCultureDecimalDigits},number:{precision:vm.Localization.NumberDecimalDigits,thousand:".",decimal:vm.Localization.NumberDecimalSeparator}};var t=accounting.formatMoney(fx.convert(vm.Euro,{from:"EUR",to:vm.Localization.ISOCurrencySymbol}));return t}function a(){console.error("Error encountered when fetching rates from api.fixer.io")}if(vm.Euro=t,null==n)throw new Error("Localization parameter is null");return vm.Localization=n,e({url:"http://api.fixer.io/latest?&base=EUR&callback=JSON_CALLBACK",method:"JSONP",headers:{Accept:"*/*"}}).then(r)["catch"](a)}return vm=this,vm.client=FCClient.GetInstance(),vm.Euro=0,vm.Localization={},{EurToUc:n}}function ThemingService(e,t,n){function r(t){function n(e){return e.data}function r(){console.error("Read error on promise ThemeService.GetTheme(genreid)")}return e({url:i.BaseURL+"/Umbraco/API/Theme/GetTheme/?&themeId="+t,method:"GET",headers:{Culture:i.UserCulture,UserDateTime:i.UserDateTime.toLocaleString(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}function a(t){function n(e){return e.data}function r(){console.error("Read error on promise ThemeService.GetActiveTheme(genreid)")}return e({url:i.BaseURL+"/Umbraco/API/Festival/GetTheme/?&genreId="+t,method:"GET",headers:{Culture:i.UserCulture,UserDateTime:i.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"}}).then(n)["catch"](r)}vm=this;var o={},i=FCClient.GetInstance();return{ActiveTheme:o,GetActiveTheme:a,GetTheme:r}}function TilesService(e,t){function n(){function t(e){return e.data}function n(){console.error("Read error on promise TilesService.GetFlexSelectOptions")}var r=e({url:a.BaseURL+"/Umbraco/API/Festival/GetFlexSelectOptions?&type=genres",method:"GET",headers:{Culture:a.UserCulture,UserDateTime:a.UserDateTime.toString(),"Content-Type":"application/json",Accept:"application/json"}}).then(t)["catch"](n);return r}function r(){function t(e){return e.data}function n(){console.info(arguments),console.error("Read error on promise TilesService.GetTiles")}var r=e({url:a.BaseURL+"/Umbraco/API/Festival/GetTiles",method:"POST",headers:{Culture:a.UserCulture,UserDateTime:a.UserDateTime.getTime(),"Content-Type":"application/json",Accept:"application/json"},data:{Culture:a.UserCulture,UserDateTime:a.UserDateTime.getTime()}}).then(t)["catch"](n);return r}vm=this;var a=FCClient.GetInstance();return{CurrentTheme:{},TilesResult:[],GetTiles:r,GetFlexSelectOptions:n}}var _CacheManagerInstance,CacheMode={Cookie:1,LocalStorage:2,Server:3},CacheManager=function(){function e(e,t,n,r,a){var i=new Date;a&&(o.Expires=a);var l=(new Date).setSeconds(i.getSeconds()+o.Expires),c={expires:l,data:n},s=JSON.stringify(c);if(e==CacheMode.Cookie){var u=new Date((new Date).getUTCFullYear()+1,(new Date).getMonth(),(new Date).getDate());if(expDate&&(u=expDate),IsNullOrEmpty(r)){t+"="+s+";expires="+u.toUTCString()+";path=/";document.cookie=t+"="+s+";expires="+u.toUTCString()+";path=/"}else{t+"="+s+";expires="+u.toUTCString()+";path="+r;document.cookie=t+"="+s+";expires="+u.toUTCString()+";path="+r}}e==CacheMode.LocalStorage&&c.data&&""!=c.data&&(localStorage.setItem(t,s),console.info("Setting "+t+" to localstorage"))}function t(e,t){if(e==CacheMode.Cookie)for(var r=t+"=",a=document.cookie.split(";"),o=0;o<a.length;o++){for(var i=a[o];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(r))return JSON.parse(i.substring(r.length,i.length))}if(e==CacheMode.LocalStorage){console.info("Getting "+t+" from localstorage");var l=JSON.parse(localStorage[t]);return l.expires>(new Date).getMilliseconds()?l:(console.info("Data expired "+t+" from localstorage"),n(CacheMode.LocalStorage,t),null)}}function n(e,t,n){e==CacheMode.Cookie&&(n?document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;path="+n:document.cookie=t+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;path=/"+n),e==CacheMode.LocalStorage&&localStorage.removeItem(t)}function r(e,t){if(e==CacheMode.Cookie){var n=GetFromCache(CacheMode.Cookie,t);return IsNullOrEmpty(n)?!1:!0}if(e==CacheMode.LocalStorage){if(0==IsNullOrEmpty(localStorage[t])){var r=JSON.parse(localStorage[t]);return r.expires>(new Date).getTime()?!0:!1}return!1}}function a(){}"manager"!=arguments[0]&&console.error("You cannot create a new instance of the cachemanager use CacheManager.GetInstance instead.");var o=this;o.HasErrors=!1,o.Errors=[],o.WriteCache=e,o.Get=t,o.DeleteFromCache=n,o.Contains=r,o.Expires=60,a()};CacheManager.GetInstance=function(){return null==_CacheManagerInstance?_CacheManagerInstance=new CacheManager("manager"):_CacheManagerInstance},window.Cache=CacheManager.GetInstance();var FCClient=function(){function e(){return t(),null!=window.navigator.languages&&window.navigator.languages.length>0&&n(window.navigator.languages[0]),r}function t(){"https"==window.location.protocol?r.Client.SafeConnection=!0:r.Client.SafeConnection=!0}function n(e){r.UserCulture=e}var r=this;return r.UserCulture="nl-NL",r.BaseURL="http://localhost:8888",r.UserDateTime=new Date,r.UserName="",r.UserID=0,r.AnonUser=!0,r.IsSignedInWithSpotify=!1,r.IsSignedInWithFacebook=!1,r.IsSignedInWithTwitter=!1,r.IsSignedInLocal=!1,r.Localization={},r.Client={Geo:window.navigator.geolocation,Device:null,Location:window.location,ScreenWidth:window.outerWidth,ScreenHeight:window.outerHeight,ViewportWidth:window.innerWidth,ViewportHeight:window.innerHeight,Browser:"",SafeConnection:!1,IsTopUser:!1,AddBlockerDetected:!1,Cookies:{},PersonalMessages:{},FriendList:{},Platform:window.navigator.platform},r.init=e,r.init()};FCClient.GetInstance=function(){var e=this;return e._instance=null,null==e._instance?(e._instance=new FCClient,e._instance):e._Instance},FCClient.CurrentTheme=null,FCClient.URLRoot="/App/",function(){"use strict";angular.module("FC",["ngRoute","ngSanitize","ui.bootstrap","FC.Main","FC.Calendar","FC.Tiles","FC.FlexSelect","FC.Reel","FC.Festival","FC.News"]),angular.module("FC").config(function(e,t){var n=(FCClient.GetInstance(),"");n="App/templates/WeekCalendarDesktop.html",e.when("/calendar/:year/:month/:genre",{templateUrl:n,controller:"CalendarController",controllerAs:"CCtr"}),e.when("/calendar/:genre",{templateUrl:n,controller:"CalendarController",controllerAs:"CCtr"}),e.when("/festival/:festivalId/:genre",{templateUrl:"App/Templates/FestivalDetail.html",controller:"FestivalController",controllerAs:"FCtr"}),e.when("/home",{templateUrl:"App/templates/Tiles.html",controller:"TilesController",controllerAs:"Ctr"}),e.when("/",{templateUrl:"App/templates/Tiles.html",controller:"TilesController",controllerAs:"Ctr"}),t.html5Mode(!1)}),window.IsNullOrEmpty=function(e){return null==e?!0:0==e.length?!0:void 0==e?!0:0==e.lenght?!0:"string"==typeof e&&""==e?!0:!1},window.StrFormat=function(e){if(IsNullOrEmpty(e))console.error("No string template was specified for the StrFormat function");else{var t=e;if(arguments.length>1)return $.each(arguments,function(e,n){if(e>0){var r=e-1;t=t.replace("{"+r+"}",n)}}),t;console.error("StrFormat function called whitout any formatting arguments.")}}}();var URLManagerInstance=null,URLManager=function(){function e(e,t,r){if(IsNullOrEmpty(n)||IsNullOrEmpty(n.URLCollection)||IsNullOrEmpty(n.URLCollection[e])||!IsNullOrEmpty(n.URLCollection[e][t]))n.URLCollection&&(IsNullOrEmpty(n.URLCollection[e])?(n.URLCollection[e]={},n.URLCollection[e][t]=r):IsNullOrEmpty(n.URLCollection[e][t])&&(n.URLCollection[e][t]=r));else{n.URLCollection.length;n.URLCollection[e][t]=r}}function t(e,t){if(!IsNullOrEmpty(n.URLCollection[e])&&!IsNullOrEmpty(n.URLCollection[e][t])){var r=n.URLCollection[e][t];return $.each(arguments,function(e,t){if(e>=2){var n=e-2;r=r.replace("{"+n+"}",t)}}),0==n.Html5Mode&&(r="/"+n.UrlHash+"/"+r),r}}(IsNullOrEmpty(arguments)||"manager"!=arguments[0])&&console.error("You cannot create a new instance of the URL manager, use window.URLManager.GetInstance()");var n=this;n.URLCollection={},n.AddURL=e,n.Html5Mode=!1,n.UrlHash="#",n.GetURL=t};URLManager.GetInstance=function(){return null==URLManagerInstance?URLManagerInstance=new URLManager("manager"):URLManagerInstance};var FC=angular.module("FC");FC.Genres={},angular.module("FC").directive("currenturl",["$location","$route",CurrentURL]),angular.module("FC").directive("apiImg",apiImg),angular.module("FC").directive("backimg",backImg),angular.module("FC").directive("collapsible",collapsible),angular.module("FC").directive("theme",["$location","$routeParams","$route",theme]),angular.module("FC").directive("desktoponly",desktopOnly),angular.module("FC").ActiveTheme={};var FCL=FCClient.GetInstance(),RouteParams=null,Route={};!function(){"use strict";angular.module("FC.Calendar",[])}(),angular.module("FC").factory("CalendarService",CalendarService),CalendarService.$inject=["$http","$q"],function(){"use strict";function e(e,t,n,r,a,o){function i(e,t){F.FestivalDayVisible=!0;var n=new Date(t.BaseDate);n.setHours(1,1,1,1);var r=new Date(e.EndDate),a=new Date(e.StartDate);return a.setHours(1,1,1,1),r.setHours(1,1,1,1),a.getTime()==n.getTime()?!0:!1}function l(){a.GetTiles().then(function(e){F.FestivalGenres=e,$.each(F.FestivalGenres,function(e,t){F.RouteGenre==t.UmbracoID.toString()&&(F.ActiveGenre=t)})})["finally"](function(){F.IsLoading=!1})}function c(){window.onresize=function(){f()},C(),F.RouteGenre=t.genre,F.RouteMonth=t.month,F.RouteYear=t.year,l(),F.RouteMonth?(F.ActiveMonth=F.RouteMonth,s(F.RouteGenre,F.RouteMonth,F.ActiveDate.getUTCFullYear())):s(F.RouteGenre,F.ActiveDate.getMonth()+1,F.ActiveDate.getUTCFullYear()),v()}function s(e,t,n){r.GetFestivalsByMonthAndYear(e,t,n).then(function(e){F.MonthFestivals=e,F.IsLoading=!1})["finally"](function(){F.IsLoading=!1})}function u(e){return new Date(e).toLocaleDateString()==T.UserDateTime.toLocaleDateString()?!0:!1}function m(e){var t=U.GetURL("calendar","FestivalURL",e.UmbracoID,F.RouteGenre);return t}function h(e){var n=t.year;IsNullOrEmpty(n)||(F.CurrentYear=n);var r=U.GetURL("calendar","DateURL",F.RouteGenre,F.CurrentYear,e+1);return r}function d(e){var n=t.genre,r=t.month;r>-1&&(F.ActiveMonth=r);var a=U.GetURL("calendar","DateURL",n,e,F.ActiveMonth,"-1");return a}function v(){r.GetMonthsByCulture().then(function(e){F.YearMonths=e,F.ActiveMonthName=F.YearMonths[F.ActiveMonth],F.ActiveMonth>=1?F.ActiveMonthName=F.YearMonths[F.ActiveMonth-1]:F.ActiveMonthName=F.YearMonths[0]})["finally"](function(){F.IsLoading=!1})}function C(){F.YearCollection[0]=T.UserDateTime.getFullYear(),F.YearCollection[1]=T.UserDateTime.getFullYear()+1}function p(){var e=T.UserDateTime.getUTCDate();return e}function g(e){var t=0;return t=-1!=F.ActiveMonth?F.ActiveMonth:T.UserDateTime.getMonth(),G>-1&&(G>=12?(F.CurrentYear++,G=0,window.location="/calendar/"+F.GenreID+"/"+F.NextYearValue+"/"+G):-1>G&&(F.CurrentYear--,G=11,window.location="/calendar/"+F.GenreID+"/"+F.PrevYearValue+"/"+G),t=G),e==t?(F.ActiveMonth=t,!0):!1}function f(){FCClient.GetInstance().Client.ViewportWidth>500?F.FestivalLogoHeight=150:F.FestivalLogoHeight=150}var T=FCClient.GetInstance(),U=URLManager.GetInstance();this.$route=e,this.$location=n,this.$routeParams=t;var F=this,S=parseInt(T.UserDateTime.getFullYear().toString()),G=(this.$routeParams.year,this.$routeParams.genre,this.$routeParams.month);return U.AddURL("calendar","DateURL","calendar/{1}/{2}/{0}"),U.AddURL("calendar","DefaultURL","calendar/{0}"),U.AddURL("calendar","FestivalURL","festival/{0}/{1}"),F.BaseURL=T.BaseURL,F.MonthViewActive=!1,F.YearCollection=[],F.IsLoading=!0,F.ActiveMonthName="",F.FestivalLogoHeight=100,F.ActiveDate=T.UserDateTime,F.PrevYearDate=T.UserDateTime,F.NextYearDate=T.UserDateTime,F.ActiveMonth=T.UserDateTime.getMonth(),F.FestivalYears=[],F.FestivalGenres=[],F.RouteGenre=0,F.RouteMonth=(new Date).getMonth()+1,F.RouteYear=(new Date).getUTCFullYear(),F.MonthFestivals=[],F.CurrentYear=S,F.NextYearValue=parseInt(S)+1,F.PrevYearValue=parseInt(S)-1,F.CurrentWeekDayCount=0,F.IsActiveMonth=g,F.GetCurrentDay=p,F.DayIsActive=u,F.GetYearURL=d,F.GetMonthURL=h,F.CurrentTheme={},F.BestDays=[],F.LeastDays=[],F.ActiveGenre={},F.FestivalOnDay=i,F.GetFestivalURL=m,c(),F}angular.module("FC.Calendar").controller("CalendarController",["$routeParams","$routeParams","$location","CalendarService","TilesService","FestivalService",e]),e.$inject=["CalendarService","TilesService","FestivalService"]}(),function(){"use strict";angular.module("FC.Festival",[])}(),angular.module("FC").factory("FestivalService",FestivalService),FestivalService.$inject=["$http","$q"],function(){"use strict";function e(e,t,n,r,a,o,i,l,c,s){function u(e){null!=e.TrainInfo&&void 0!=e.TrainInfo&&e.TrainInfo.length>0?d.ShowTravelInfo=!0:null!=e.BikeInfo&&void 0!=e.BikeInfo&&e.BikeInfo.length>0?d.ShowTravelInfo=!0:null!=e.BusInfo&&void 0!=e.BusInfo&&e.BusInfo.length>0?d.ShowTravelInfo=!0:null!=e.TaxiInfo&&void 0!=e.TaxiInfo&&e.TaxiInfo.length>0?d.ShowTravelInfo=!0:null!=e.AirPlaneInfo&&void 0!=e.AirPlaneInfo&&e.AirPlaneInfo.length>0?d.ShowTravelInfo=!0:null!=e.Car&&void 0!=e.AirPlaneInfo&&e.AirPlaneInfo.length>0?d.ShowTravelInfo=!0:d.ShowTravelInfo=!1}function m(e){var t=0,n=0,r=9;e.length-1<9&&(r=e.length-1);for(var a=0;r>=a;)a%2!=0?(d.ArtistsRight[n]=e[a],n++):(d.ArtistsLeft[t]=e[a],t++),a++}function h(){s.GetNews(d.ActiveGenreIds).then(function(e){d.News=e}),l.GetGenre(d.ActiveGenreIds).then(function(e){d.ActiveGenre=e,i.GetFestival(d.ActiveFestivalId).then(function(e){d.ActiveFestival=e,m(d.ActiveFestival.Artists),d.IsLoading=!1,d.ActiveFestival.DailyTicketPrice>0&&c.EurToUc(d.ActiveFestival.DailyTicketPrice,d.ActiveFestival.Localization).then(function(e){d.ActiveFestival.CalcDailyPrice=e}),d.ActiveFestival.TicketPrice>0&&c.EurToUc(d.ActiveFestival.TicketPrice,d.ActiveFestival.Localization).then(function(e){d.ActiveFestival.CalcPrice=e}),d.HasTravelInfo(e)})})}var d=this,v=FCClient.GetInstance();d.init=h,d.ActiveFestival={},d.ActiveFestivalId=e.festivalId,d.ActiveGenreIds=e.genre,d.ActiveGenre={},d.ActiveTheme={},d.IsLoading=!0,d.BaseURL=v.BaseURL,d.HasTravelInfo=u,d.ShowTravelInfo=!1,d.ArtistsLeft=[],d.ArtistsRight=[],d.News=[],d.init()}angular.module("FC.Festival").controller("FestivalController",["$routeParams","$routeParams","$location","$sanitize","CalendarService","TilesService","FestivalService","MainService","RatesService","NewsService",e]),e.$inject=["CalendarService","TilesService","FestivalService","MainService","RatesService","NewsService"]}(),function(){"use strict";angular.module("FC.FlexSelect",[])}(),function(){"use strict";function e(e,t,n,r,a,o){function i(e){$(e).toggleClass("active");var t=$(e).attr("data-value");if(-1==$.inArray(t,d.RouteGenres)){var n=d.ActivatedGenres.length;d.ActivatedGenres[n]=t}else $(e).hide()}function l(){var e="calendar/{{genre}}",n="",a=(t.genreid,t.year),o=t.month,i=t.week;$.each(d.RouteGenres,function(e,t){n+=t+","}),$.each(d.ActivatedGenres,function(e,t){n+=t+","}),n=n.replace(/,\s*$/,""),d.FilterURL=e.replace("{{genre}}",n),a&&o&&i?d.FilterURL+="/"+a+"/"+o+"/"+i:a&&o&&(d.FilterURL+="/"+a+"/"+o+"/"),r.location.href=d.FilterURL}function c(e){var t="";$.each(d.RouteGenres,function(n,r){if(e[r]){var a=Cache.Get(CacheMode.LocalStorage,"CurrentTheme"),o=a.data;if(o){var i="",l="";t+=d.SelectedValueTemplate.replace("{{style}}",l).replace("{{value}}",e[r]).replace("{{datavalue}}",r).replace("{{iconColor}}",i)}}}),$(".FlexSelectedValue").html(),$(".FlexSelectedValue").append(d.SelectedValueWrapper.replace("{{value}}",t)),$(".value[data-value]").click(function(){var e=$(this).attr("data-value");s(e)})}function s(e){var n=d.RouteGenres.indexOf(e),a=d.ActivatedGenres.indexOf(e);d.ActivatedGenres[a]=null,d.RouteGenres[n]=null;var o="calendar/{{genre}}",i="",l=(t.genreid,t.year),c=t.month,s=t.week;$.each(d.RouteGenres,function(e,t){null!=t&&(i+=t+",")}),$.each(d.ActivatedGenres,function(e,t){null!=t&&(i+=t+",")}),i=i.replace(/,\s*$/,""),d.FilterURL=o.replace("{{genre}}",i),l&&c&&s?d.FilterURL+="/"+l+"/"+c+"/"+s:l&&c&&(d.FilterURL+="/"+l+"/"+c+"/"),r.location.href=d.FilterURL}function u(e,t){"genres"==t.toLowerCase()&&m(e),$("a.list-group-item").click(function(){d.Activate(this)}),$("#save").click(function(){d.Save()})}function m(e){var n=t.genreid,r=t.year,a=t.month,o="calendar/{{genre}}";r&&a&&(o+="/"+r+"/"+a);var i="",l=$(".FlexSelectOptions");if(e){var c="",i="";n&&(i+=o.replace("{{genre}}",n+",{{n}}"));var s=1;$.each(e,function(e,t){-1==$.inArray(e,d.RouteGenres)&&(c+=s%2==0?d.OptionTemplate.replace("{{value}}",e).replace("{{name}}",t).replace("{{oddeven}}","even"):d.OptionTemplate.replace("{{value}}",e).replace("{{name}}",t).replace("{{oddeven}}","odd")),s++}),v=d.OptionWrapperTemplate.replace("{{options}}",c),l&&l.html(v)}}function h(e){e&&"genres"==e.toLowerCase()&&o.GetFlexSelectOptions().then(function(t){u(t,e),c(t)})}var d=this;FCClient.GetInstance();d.CurrentTheme={},d.SelectedValueWrapper='<div class="values">{{value}}</div>',d.SelectedValueTemplate='<div class="value" style="{{style}}" data-value="{{datavalue}}">{{value}}<span class="icon glyphicon glyphicon-remove" style="{{iconColor}}" aria-hidden="true"></span></div>',d.OptionWrapperTemplate='<div class="list-group options">{{options}}</div>',d.OptionTemplate='<a class="list-group-item option {{oddeven}}" data-value="{{value}}">{{name}}</a>',d.Activate=i,d.AllValuesText="All",d.RouteGenres=[],d.FSCOptionsClass=".FlexSelectOptions",d.FSCValueClass=".FlexSelectValues",d.SetOptions=u,d.FilterURL="/calendar/",t.genreid&&(d.RouteGenres=t.genreid.split(",")),d.ActivatedGenres=[];var v="";d.SetFlexSelectOptions=h,d.Save=l}angular.module("FC.FlexSelect").controller("FlexSelectController",["$routeParams","$routeParams","$location","$window","CalendarService","TilesService",e]),e.$inject=["CalendarService","TilesService"]}(),function(){"use strict";angular.module("FC.Main",[])}(),function(){"use strict";function e(e){function t(){}function n(){"Artiest, genre, jaar, naam festival"==o.SearchKey&&(o.SearchKey="")}function r(){null!=o.SearchKey&&""!=o.SearchKey&&o.c.SearchFestivals(this.SearchKey).then(function(e){o.FestivalHints=e,o.FestivalHints.length>0&&(o.HintsVisible=!0)})}function a(e,t){var n=!0;0==t&&(n=!1);var r="",a="",i=null;o.ModalComponents=$('[data-modal="true"]'),o.HiddenComponents=$('[data-modal-hidden="true"]'),o.VisibleComponents=$('[data-modal-hidden="false"]');var l=$("#overlay"),c=$("#overlay-toolbar");if(e&&e.VisibleClass&&e.HiddenClass&&e.Selector)if(r=e.VisibleClass,a=e.HiddenClass,i=$(e.Selector)){if(i.hasClass(r)){if(i.removeClass(r),i.addClass(a),i.attr("data-modal-hidden","true"),l.hasClass("maxHeight"))return l.removeClass("maxHeight"),l.addClass("minHeight"),void(1==n&&(c.removeClass("maxHeight"),c.addClass("minHeight")))}else i.attr("data-modal-hidden","false"),i.addClass(r),i.removeClass(a);if(l.hasClass("minHeight")&&(1==n&&(c.addClass("maxHeight"),c.removeClass("minHeight")),l.addClass("maxHeight"),l.removeClass("minHeight")),-1==$.inArray(e,o.ActiveComponents)){var s=o.ActiveComponents.length;o.ActiveComponents[s]=e}}else o.ActiveComponents.length>0&&$.each(o.ActiveComponents,function(e,t){i=$(t.Selector),i&&"false"==i.attr("data-modal-hidden")&&(i.addClass(t.HiddenClass),i.removeClass(t.VisibleClass),i.attr("data-modal-hidden","true"))}),l.hasClass("maxHeight")&&(l.removeClass("maxHeight"),l.addClass("minHeight"),1==n&&(c.removeClass("maxHeight"),c.addClass("minHeight")))}var o=this,i=FCClient.GetInstance();o.c=e,o.APIBaseURL=i.BaseURL,o.ClientScreenWidth=i.Client.ScreenWidth,o.ClientScreenHeight=i.Client.ScreenHeight,o.FestivalHints=[],o.HintsVisible=!1,o.SearchKey="Artist, genre, year, festival name",o.ToggleOverlay=a,o.ModalComponents=[],o.ActiveComponents=[],o.HiddenComponents=[],o.VisibleComponents=[],o.DefaultBackground="",o.screen=screen,o.filter=r,o.resetSearchKey=n,t()}angular.module("FC.Main").controller("MainController",e),e.$inject=["CalendarService"]}(),angular.module("FC").factory("MainService",MainService),MainService.$inject=["$http","$q"],function(){"use strict";angular.module("FC.News",[])}(),angular.module("FC").factory("NewsService",NewsService),NewsService.$inject=["$http","$q","$location"],function(){"use strict";angular.module("FC.Reel",[])}(),angular.module("FC").factory("ReelService",ReelService),ReelService.$inject=["$http","$q"],function(){"use strict";function e(e){function t(){r=$("div.reel-item"),o=r.length-1,a=$("div.reel-item.active"),n()}function n(){}var r,a,o;FCClient.GetInstance();t()}angular.module("FC.Reel").controller("ReelController",e),e.$inject=["ReelService"]}(),angular.module("FC").factory("RatesService",RatesService),RatesService.$inject=["$http","$q"],function(){"use strict";angular.module("FC.Theming",[])}(),angular.module("FC").factory("ThemingService",ThemingService),MainService.$inject=["$http","$q","$location"],function(){"use strict";angular.module("FC.Tiles",[])}(),angular.module("FC").factory("TilesService",TilesService),TilesService.$inject=["$http","$q"],function(){"use strict";function e(e,t,n){function r(){n.GetTiles().then(function(e){a.Tiles=e})}var a=this,o=FCClient.GetInstance();a.CurrentURL=e.absUrl(),a.Tiles=[],r(),a.ClientScreenWidth=o.Client.ScreenWidth,a.ClientScreenHeight=o.Client.ScreenHeight}angular.module("FC.Tiles").controller("TilesController",e),e.$inject=["$location","$route","TilesService"]}();